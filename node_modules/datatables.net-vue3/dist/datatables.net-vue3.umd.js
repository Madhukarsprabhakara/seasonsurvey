(function(l,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],n):(l=typeof globalThis<"u"?globalThis:l||self,n((l.datatables=l.datatables||{},l.datatables["net-vue3"]={}),l.Vue))})(this,function(l,n){"use strict";const y=["childRow","column-sizing","column-visibility","destroy","draw","error","init","length","order","page","preDraw","preInit","preXhr","processing","requestChild","search","stateLoadParams","stateLoaded","stateSaveParams","xhr","autoFill","preAutoFill","buttons-action","buttons-processing","column-reorder","key","key-blur","key-focus","key-refocus","key-return-submit","responsive-display","responsive-resize","rowgroup-datasrc","pre-row-reorder","row-reorder","row-reordered","dtsb-inserted","deselect","select","select-blur","selectItems","selectStyle","user-select","stateRestore-change"];let p;const k={name:"Datatables.netVue",inheritAttrs:!1,use(u){p=u}},b=n.defineComponent({...k,props:{ajax:null,columns:null,data:null,options:null},emits:y,setup(u,{expose:m}){const i=u,h=n.ref(null),d={},c=n.ref(),D=n.ref([]);n.watch(()=>i.data,r=>{let e=c.value;if(e){for(var s=Object.keys(d),a=0;a<s.length;a++)delete d[s[a]];e.clear(),e.rows.add(r).draw(!1)}},{deep:!0}),n.onMounted(()=>{var s;const r=n.getCurrentInstance();let e=i.options||{};if(i.data&&(e.data=i.data,j(e.data)),i.columns&&(e.columns=i.columns),e.columns&&w(e.columns,r),i.ajax&&(e.ajax=i.ajax),e.columnDefs||(e.columnDefs=[]),r){let a=Object.keys(r.slots);for(let t=0;t<a.length;t++){let o=a[t];if(o.match(/^column\-/)){let f=o.replace("column-","");e.columnDefs.push({target:f.match(/^\d+$/)?parseInt(f):f+":name",render:"#"+o})}}w(e.columnDefs,r)}if(!p)throw new Error("DataTables library not set. See https://datatables.net/tn/19 for details.");c.value=new p(n.unref(h),e),(s=c.value)==null||s.on("preXhr",function(){let a=Object.keys(d);for(var t=0;t<a.length;t++)delete d[a[t]]});for(let a of y)c.value&&r&&c.value.on(a,function(){var t=Array.from(arguments),o=t.shift();t.unshift({event:o,dt:c}),t.unshift(a),r.emit.apply(r,t)})}),n.onBeforeUnmount(()=>{var r;(r=c.value)==null||r.destroy(!0)});function j(r){D.value=r.value?r.value.slice():r.slice()}function g(r){return function(e,s,a,t){let o=t.row+","+t.col;if(!d[o]){let f=n.h("div",r({cellData:e,colIndex:t.col,rowData:a,rowIndex:t.row,type:s}));d[o]=document.createElement("div"),n.render(f,d[o])}return d[o]}}function w(r,e){if(e)for(let a=0;a<r.length;a++){let t=r[a];if(typeof t.render=="string"&&t.render.charAt(0)==="#"){var s=t.render.replace("#","");e.slots[s]&&(t.render=g(e.slots[s]))}else if(typeof t.render=="object"&&typeof t.render.display=="string"&&t.render.display.charAt(0)==="#"){var s=t.render.display.replace("#","");e.slots[s]&&(t.render.display=g(e.slots[s]))}}}return m({dt:c}),(r,e)=>e[0]||(n.setBlockTracking(-1),e[0]=n.createElementVNode("div",{class:"datatable"},[n.createElementVNode("table",n.mergeProps({ref_key:"table",ref:h},r.$attrs,{style:{width:"100%"}}),[n.renderSlot(r.$slots,"default")],16)]),n.setBlockTracking(1),e[0])}}),v=(()=>{const u=b;return u.install=m=>{m.component("Datatables.netVue",u)},u})();l.DataTable=b,l.default=v,Object.defineProperties(l,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
