import{i as B,w as L,a as $,h as j,o as m,t as _,u as K,b as w,A as P,I as D,s as U,l as V,N as E,p as Z,c as W,f as q,d as I,e as v,v as H,g as O,_ as N,O as Q}from"./use-text-value-B8jWN5Pr.js";import{M as A,p as k,r as h,j as R,S as J,s as z,N as G,l as x,U as X,o as Y,d as ee,a as te}from"./app-CdfzWFsh.js";function ae({container:a,accept:d,walk:b,enabled:p}){A(()=>{let f=a.value;if(!f||p!==void 0&&!p.value)return;let c=B(a);if(!c)return;let e=Object.assign(u=>d(u),{acceptNode:d}),r=c.createTreeWalker(f,NodeFilter.SHOW_ELEMENT,e,!1);for(;r.nextNode();)b(r.currentNode)})}var ne=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(ne||{}),le=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(le||{});function ue(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let C=Symbol("MenuContext");function T(a){let d=X(C,null);if(d===null){let b=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(b,T),b}return d}let se=k({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:d,attrs:b}){let p=h(1),f=h(null),c=h(null),e=h([]),r=h(""),u=h(null),S=h(1);function M(t=l=>l){let l=u.value!==null?e.value[u.value]:null,n=Q(t(e.value.slice()),g=>m(g.dataRef.domRef)),s=l?n.indexOf(l):null;return s===-1&&(s=null),{items:n,activeItemIndex:s}}let o={menuState:p,buttonRef:f,itemsRef:c,items:e,searchQuery:r,activeItemIndex:u,activationTrigger:S,closeMenu:()=>{p.value=1,u.value=null},openMenu:()=>p.value=0,goToItem(t,l,n){let s=M(),g=q(t===I.Specific?{focus:I.Specific,id:l}:{focus:t},{resolveItems:()=>s.items,resolveActiveIndex:()=>s.activeItemIndex,resolveId:i=>i.id,resolveDisabled:i=>i.dataRef.disabled});r.value="",u.value=g,S.value=n??1,e.value=s.items},search(t){let l=r.value!==""?0:1;r.value+=t.toLowerCase();let n=(u.value!==null?e.value.slice(u.value+l).concat(e.value.slice(0,u.value+l)):e.value).find(g=>g.dataRef.textValue.startsWith(r.value)&&!g.dataRef.disabled),s=n?e.value.indexOf(n):-1;s===-1||s===u.value||(u.value=s,S.value=1)},clearSearch(){r.value=""},registerItem(t,l){let n=M(s=>[...s,{id:t,dataRef:l}]);e.value=n.items,u.value=n.activeItemIndex,S.value=1},unregisterItem(t){let l=M(n=>{let s=n.findIndex(g=>g.id===t);return s!==-1&&n.splice(s,1),n});e.value=l.items,u.value=l.activeItemIndex,S.value=1}};return L([f,c],(t,l)=>{var n;o.closeMenu(),$(l,j.Loose)||(t.preventDefault(),(n=m(f))==null||n.focus())},R(()=>p.value===0)),J(C,o),_(R(()=>K(p.value,{0:w.Open,1:w.Closed}))),()=>{let t={open:p.value===0,close:o.closeMenu};return P({ourProps:{},theirProps:a,slot:t,slots:d,attrs:b,name:"Menu"})}}}),ie=k({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:d,slots:b,expose:p}){var f;let c=(f=a.id)!=null?f:`headlessui-menu-button-${D()}`,e=T("MenuButton");p({el:e.buttonRef,$el:e.buttonRef});function r(o){switch(o.key){case v.Space:case v.Enter:case v.ArrowDown:o.preventDefault(),o.stopPropagation(),e.openMenu(),x(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.First)});break;case v.ArrowUp:o.preventDefault(),o.stopPropagation(),e.openMenu(),x(()=>{var t;(t=m(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(I.Last)});break}}function u(o){switch(o.key){case v.Space:o.preventDefault();break}}function S(o){a.disabled||(e.menuState.value===0?(e.closeMenu(),x(()=>{var t;return(t=m(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(o.preventDefault(),e.openMenu(),ue(()=>{var t;return(t=m(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let M=U(R(()=>({as:a.as,type:d.type})),e.buttonRef);return()=>{var o;let t={open:e.menuState.value===0},{...l}=a,n={ref:e.buttonRef,id:c,type:M.value,"aria-haspopup":"menu","aria-controls":(o=m(e.itemsRef))==null?void 0:o.id,"aria-expanded":e.menuState.value===0,onKeydown:r,onKeyup:u,onClick:S};return P({ourProps:n,theirProps:l,slot:t,attrs:d,slots:b,name:"MenuButton"})}}}),ce=k({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:d,slots:b,expose:p}){var f;let c=(f=a.id)!=null?f:`headlessui-menu-items-${D()}`,e=T("MenuItems"),r=h(null);p({el:e.itemsRef,$el:e.itemsRef}),ae({container:R(()=>m(e.itemsRef)),enabled:R(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function u(t){var l;switch(r.value&&clearTimeout(r.value),t.key){case v.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case v.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let n=e.items.value[e.activeItemIndex.value];(l=m(n.dataRef.domRef))==null||l.click()}e.closeMenu(),N(m(e.buttonRef));break;case v.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Next);case v.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Previous);case v.Home:case v.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.First);case v.End:case v.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(I.Last);case v.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),x(()=>{var n;return(n=m(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})});break;case v.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),x(()=>H(m(e.buttonRef),t.shiftKey?O.Previous:O.Next));break;default:t.key.length===1&&(e.search(t.key),r.value=setTimeout(()=>e.clearSearch(),350));break}}function S(t){switch(t.key){case v.Space:t.preventDefault();break}}let M=V(),o=R(()=>M!==null?(M.value&w.Open)===w.Open:e.menuState.value===0);return()=>{var t,l;let n={open:e.menuState.value===0},{...s}=a,g={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(l=m(e.buttonRef))==null?void 0:l.id,id:c,onKeydown:u,onKeyup:S,role:"menu",tabIndex:0,ref:e.itemsRef};return P({ourProps:g,theirProps:s,slot:n,attrs:d,slots:b,features:E.RenderStrategy|E.Static,visible:o.value,name:"MenuItems"})}}}),ve=k({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:d,attrs:b,expose:p}){var f;let c=(f=a.id)!=null?f:`headlessui-menu-item-${D()}`,e=T("MenuItem"),r=h(null);p({el:r,$el:r});let u=R(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===c:!1),S=Z(r),M=R(()=>({disabled:a.disabled,get textValue(){return S()},domRef:r}));z(()=>e.registerItem(c,M)),G(()=>e.unregisterItem(c)),A(()=>{e.menuState.value===0&&u.value&&e.activationTrigger.value!==0&&x(()=>{var i,y;return(y=(i=m(r))==null?void 0:i.scrollIntoView)==null?void 0:y.call(i,{block:"nearest"})})});function o(i){if(a.disabled)return i.preventDefault();e.closeMenu(),N(m(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(I.Nothing);e.goToItem(I.Specific,c)}let l=W();function n(i){l.update(i)}function s(i){l.wasMoved(i)&&(a.disabled||u.value||e.goToItem(I.Specific,c,0))}function g(i){l.wasMoved(i)&&(a.disabled||u.value&&e.goToItem(I.Nothing))}return()=>{let{disabled:i,...y}=a,F={active:u.value,disabled:i,close:e.closeMenu};return P({ourProps:{id:c,ref:r,role:"menuitem",tabIndex:i===!0?void 0:-1,"aria-disabled":i===!0?!0:void 0,onClick:o,onFocus:t,onPointerenter:n,onMouseenter:n,onPointermove:s,onMousemove:s,onPointerleave:g,onMouseleave:g},theirProps:{...b,...y},slot:F,attrs:b,slots:d,name:"MenuItem"})}}});function de(a,d){return Y(),ee("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon"},[te("path",{d:"M10 3a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM10 8.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM11.5 15.5a1.5 1.5 0 1 0-3 0 1.5 1.5 0 0 0 3 0Z"})])}export{ce as M,ie as S,ve as b,se as g,de as r};
