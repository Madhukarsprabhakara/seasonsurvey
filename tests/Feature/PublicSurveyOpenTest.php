<?php

use App\Models\User;
use App\Models\Survey;
//use App\Database\Seeders\LanguageSeeder;
use Illuminate\Support\Facades\Artisan;
//use Illuminate\Foundation\Testing\RefreshDatabase;
//uses(RefreshDatabase::class);


beforeEach(function () {
    // Seed the database before each test
    //$this->refreshDatabase();
    Artisan::call('migrate:fresh');
    User::factory()->withPersonalTeam()->unverified()->create();
    $this->artisan('db:seed', [
        '--class' => 'DatabaseSeeder',
    ]);
    
    
});


it('can open a public and enabled survey page for anyone with the link', function(){
	
	//open the link ans assert 200
    $response = $this->get(route('surveys.show', Survey::latest()->first()->global_id));
    $response->assertStatus(200);
	//$response = $this->get('/');
    //$this->assertCount(1, $user->fresh()->ownedTeams);
    //$this->assertEquals('Test Team', $user->fresh()->ownedTeams()->latest('id')->first()->name);
    

});




