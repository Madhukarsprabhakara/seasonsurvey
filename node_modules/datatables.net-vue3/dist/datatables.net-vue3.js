"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const l=require("vue"),b=["childRow","column-sizing","column-visibility","destroy","draw","error","init","length","order","page","preDraw","preInit","preXhr","processing","requestChild","search","stateLoadParams","stateLoaded","stateSaveParams","xhr","autoFill","preAutoFill","buttons-action","buttons-processing","column-reorder","key","key-blur","key-focus","key-refocus","key-return-submit","responsive-display","responsive-resize","rowgroup-datasrc","pre-row-reorder","row-reorder","row-reordered","dtsb-inserted","deselect","select","select-blur","selectItems","selectStyle","user-select","stateRestore-change"];let p;const k={name:"Datatables.netVue",inheritAttrs:!1,use(i){p=i}},h=l.defineComponent({...k,props:{ajax:null,columns:null,data:null,options:null},emits:b,setup(i,{expose:f}){const o=i,m=l.ref(null),u={},c=l.ref(),g=l.ref([]);l.watch(()=>o.data,r=>{let e=c.value;if(e){for(var n=Object.keys(u),a=0;a<n.length;a++)delete u[n[a]];e.clear(),e.rows.add(r).draw(!1)}},{deep:!0}),l.onMounted(()=>{var n;const r=l.getCurrentInstance();let e=o.options||{};if(o.data&&(e.data=o.data,w(e.data)),o.columns&&(e.columns=o.columns),e.columns&&v(e.columns,r),o.ajax&&(e.ajax=o.ajax),e.columnDefs||(e.columnDefs=[]),r){let a=Object.keys(r.slots);for(let t=0;t<a.length;t++){let s=a[t];if(s.match(/^column\-/)){let d=s.replace("column-","");e.columnDefs.push({target:d.match(/^\d+$/)?parseInt(d):d+":name",render:"#"+s})}}v(e.columnDefs,r)}if(!p)throw new Error("DataTables library not set. See https://datatables.net/tn/19 for details.");c.value=new p(l.unref(m),e),(n=c.value)==null||n.on("preXhr",function(){let a=Object.keys(u);for(var t=0;t<a.length;t++)delete u[a[t]]});for(let a of b)c.value&&r&&c.value.on(a,function(){var t=Array.from(arguments),s=t.shift();t.unshift({event:s,dt:c}),t.unshift(a),r.emit.apply(r,t)})}),l.onBeforeUnmount(()=>{var r;(r=c.value)==null||r.destroy(!0)});function w(r){g.value=r.value?r.value.slice():r.slice()}function y(r){return function(e,n,a,t){let s=t.row+","+t.col;if(!u[s]){let d=l.h("div",r({cellData:e,colIndex:t.col,rowData:a,rowIndex:t.row,type:n}));u[s]=document.createElement("div"),l.render(d,u[s])}return u[s]}}function v(r,e){if(e)for(let a=0;a<r.length;a++){let t=r[a];if(typeof t.render=="string"&&t.render.charAt(0)==="#"){var n=t.render.replace("#","");e.slots[n]&&(t.render=y(e.slots[n]))}else if(typeof t.render=="object"&&typeof t.render.display=="string"&&t.render.display.charAt(0)==="#"){var n=t.render.display.replace("#","");e.slots[n]&&(t.render.display=y(e.slots[n]))}}}return f({dt:c}),(r,e)=>e[0]||(l.setBlockTracking(-1),e[0]=l.createElementVNode("div",{class:"datatable"},[l.createElementVNode("table",l.mergeProps({ref_key:"table",ref:m},r.$attrs,{style:{width:"100%"}}),[l.renderSlot(r.$slots,"default")],16)]),l.setBlockTracking(1),e[0])}}),D=(()=>{const i=h;return i.install=f=>{f.component("Datatables.netVue",i)},i})();exports.DataTable=h;exports.default=D;
